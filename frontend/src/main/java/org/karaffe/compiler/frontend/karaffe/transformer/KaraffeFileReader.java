package org.karaffe.compiler.frontend.karaffe.transformer;

import org.antlr.v4.runtime.ANTLRFileStream;
import org.antlr.v4.runtime.CommonTokenStream;
import org.karaffe.compiler.frontend.karaffe.antlrautogenerated.KaraffeLexer;

import java.io.File;
import java.io.IOException;

public class KaraffeFileReader extends AbstractFileTransformer<CommonTokenStream> {

    @Override
    public String passName() {
        return "file-reader";
    }

    @Override
    public String passDescription() {
        return "read karaffe file";
    }

    @Override
    public CommonTokenStream run(File input) {
        try {
            KaraffeLexer lexer = new KaraffeLexer(new ANTLRFileStream(input.getAbsolutePath()));
            return new CommonTokenStream(lexer);
        } catch (IOException e) {
            throw new PassAbortedException(e);
        }
    }

    @Override
    public boolean changed() {
        return false;
    }
}
